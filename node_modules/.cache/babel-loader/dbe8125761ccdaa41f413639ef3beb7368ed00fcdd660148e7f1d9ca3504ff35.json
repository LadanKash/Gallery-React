{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lkash\\\\Desktop\\\\Gallery\\\\src\\\\components\\\\ImageGrid.js\",\n  _s = $RefreshSig$();\nimport { deleteDoc, doc } from \"firebase/firestore\";\nimport { useFirestore } from \"../hooks/useFirestore\";\nimport { db, storage } from \"../firebase/config\";\nimport { deleteObject, ref } from \"firebase/storage\";\nimport { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ImageGrid = _ref => {\n  _s();\n  let {\n    setSelectedImg\n  } = _ref;\n  const {\n    docs\n  } = useFirestore('images');\n  const [showDeleteButtons, setShowDeleteButtons] = useState(false);\n  const handleDelete = async (e, docId, imageUrl) => {\n    e.stopPropagation();\n    try {\n      await deleteDoc(doc(db, 'images', docId));\n      const imageRef = ref(storage, imageUrl);\n      await deleteObject(imageRef);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const ShowButtonsAfterDelay = () => {\n    setTimeout(() => {\n      setShowDeleteButtons(true);\n    }, 200);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"img-grid\",\n    children: docs && docs.map(doc => /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"img-wrap\",\n      onClick: () => setSelectedImg(doc.url),\n      layout: true,\n      whileHover: {\n        opacity: 1\n      },\n      onMouseEnter: ShowButtonsAfterDelay,\n      onMouseLeave: () => setShowDeleteButtons(false),\n      children: [/*#__PURE__*/_jsxDEV(motion.img, {\n        src: doc.url,\n        alt: \"uploade pic\",\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        transition: {\n          delay: 1\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 21\n      }, this), showDeleteButtons && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"delete-button\",\n        onClick: e => handleDelete(e, doc.id, doc.url),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 25\n      }, this)]\n    }, doc.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 9\n  }, this);\n};\n_s(ImageGrid, \"nlo/jB1tZwNxYooO0BjhiKW8ryM=\", false, function () {\n  return [useFirestore];\n});\n_c = ImageGrid;\nvar _c;\n$RefreshReg$(_c, \"ImageGrid\");","map":{"version":3,"names":["deleteDoc","doc","useFirestore","db","storage","deleteObject","ref","useState","motion","jsxDEV","_jsxDEV","ImageGrid","_ref","_s","setSelectedImg","docs","showDeleteButtons","setShowDeleteButtons","handleDelete","e","docId","imageUrl","stopPropagation","imageRef","err","console","log","ShowButtonsAfterDelay","setTimeout","className","children","map","div","onClick","url","layout","whileHover","opacity","onMouseEnter","onMouseLeave","img","src","alt","initial","animate","transition","delay","fileName","_jsxFileName","lineNumber","columnNumber","id","_c","$RefreshReg$"],"sources":["C:/Users/lkash/Desktop/Gallery/src/components/ImageGrid.js"],"sourcesContent":["import { deleteDoc, doc } from \"firebase/firestore\"\r\nimport { useFirestore } from \"../hooks/useFirestore\"\r\nimport { db, storage } from \"../firebase/config\"\r\nimport { deleteObject, ref } from \"firebase/storage\"\r\nimport { useState } from \"react\"\r\nimport { motion } from \"framer-motion\"\r\n\r\nexport const ImageGrid = ({setSelectedImg}) => {\r\n\r\n    const { docs } = useFirestore('images')\r\n    const [showDeleteButtons, setShowDeleteButtons] = useState(false)\r\n    \r\n    const handleDelete = async (e, docId, imageUrl) => {\r\n        e.stopPropagation()\r\n        try {\r\n            await deleteDoc(doc(db, 'images', docId))\r\n\r\n            const imageRef = ref(storage, imageUrl)\r\n            await deleteObject(imageRef)\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    const ShowButtonsAfterDelay = () => {\r\n        setTimeout(() => {\r\n            setShowDeleteButtons(true)\r\n        }, 200)\r\n    }\r\n\r\n    return (\r\n        <div className=\"img-grid\">\r\n            { docs && docs.map(doc => (\r\n                <motion.div\r\n                    className=\"img-wrap\"\r\n                    key={doc.id}\r\n                    onClick={ () => setSelectedImg(doc.url)}\r\n                    layout\r\n                    whileHover={{opacity: 1}}\r\n                    onMouseEnter={ShowButtonsAfterDelay}\r\n                    onMouseLeave={() => setShowDeleteButtons(false)}\r\n                >\r\n\r\n                    <motion.img\r\n                        src={doc.url}\r\n                        alt=\"uploade pic\"\r\n                        initial={{opacity: 0}}\r\n                        animate={{opacity: 1}}\r\n                        transition={{delay: 1}}\r\n                    />\r\n\r\n                    { showDeleteButtons && (\r\n                        <button className=\"delete-button\"\r\n                            onClick={ e => handleDelete(e, doc.id, doc.url)}>Delete\r\n                        </button>\r\n                    )}\r\n\r\n                </motion.div>\r\n            ))}\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}